<?xml version="1.0" standalone="yes"?>
<!DOCTYPE PLUGIN [
<!ENTITY name "openVMTools_compiled Version Test">
<!ENTITY author "StevenD">
<!ENTITY version "2025.02.26">
<!ENTITY pluginURL "https://raw.githubusercontent.com/StevenDTX/unRAID-open-vm-tools/master/&name;.plg">

]>
<PLUGIN name="&name;" author="&author;" version="&version;" pluginURL="&pluginURL;" min="6.10.0" support="https://forums.unraid.net/topic/36603-open-vm-tools-for-unraid-6">

<CHANGES>
##&name;

###2025.02.26
- Just a plugin that will tell you which version of openVMTools_compiled will be installed
	

</CHANGES>

<!-- The 'pre-install' script. -->
  <FILE Run="/bin/bash">
    <INLINE>


KERNEL=`uname -r`
UNRAID_VERSION=`cat /etc/unraid-version | sed 's/version=//g' | sed 's/"//g'`

echo ""
echo "unRAID Version: $UNRAID_VERSION"
echo "Kernel Version: $KERNEL"
echo ""
echo ""


case $UNRAID_VERSION in
	
	## 6.10.0
	6.10.3			)	OVTNAME=open_vm_tools-12.0.5-5.15.46-Unraid-x86_64-202206141259.tgz	;;
	6.10.2			)	OVTNAME=open_vm_tools-12.0.0-5.15.43-Unraid-x86_64-202205292055.tgz	;;
	6.10.[0-1]		)	OVTNAME=open_vm_tools-12.0.0-5.15.40-Unraid-x86_64-202205171643.tgz	;;
	    
	## 6.11.0
	6.11.*			)	OVTNAME=open_vm_tools-12.1.0-202208241430.tgz	;;
	    
	## 6.12.x / 7.0.0 beta
	6.12.[0-9][0-9]		)	OVTNAME=open_vm_tools-12.4.5-202409011517.tgz	;;
	6.12.[0-9] 		)	OVTNAME=open_vm_tools-12.3.5-202402131823.tgz	;;

	## 7.0.x
	7.*			)	OVTNAME=open_vm_tools-12.5.0-202502251957.tgz	;;
	
	# Version not compatible
	*	)
		echo ""
		echo ""
		echo "--------------------------------------------------------------------------"
		echo ""
		echo "   Sorry, OpenVMTools has not yet been compiled for your unRAID version."
		echo ""
		echo "   If using a version of unRAID prior to v6.10.0, you may need this plugin:
		echo "   https://raw.githubusercontent.com/StevenDTX/unRAID-open-vm-tools/refs/heads/master/openVMTools_compiled_prior_to_v6.12.0.plg
		echo ""
		echo "--------------------------------------------------------------------------"
		echo ""
		echo ""
	;;

esac  

echo ""
echo ""
echo "-----------------------------------------------------------"
echo ""
echo " Version that would be installed:"
echo " $OVTNAME"
echo ""
echo "-----------------------------------------------------------"
echo ""
echo ""

</INLINE>
  </FILE>
 
</PLUGIN>

